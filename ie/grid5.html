<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>그리드 메서드 확인용</title>
<link rel="stylesheet" type="text/css" href="css/dx.common.css"/>
<link rel="stylesheet" type="text/css" href="css/dx.grid.custom.css"/>
<script src="js/jquery-3.5.1.js"></script>
<script src="js/lodash-4.17.15.min.js"></script>
<script src="js/dx.custom.js"></script>
<script src="js/dx.grid.js"></script>
<script src="readGridData.js"></script>

<style>
.form-content {
	margin-bottom: 30px;
}

.redText {
	color: red;
	font-weight: bold;
}
</style>

<script type="text/javascript">
$(document).ready(function () {
	$("button[data-type='addRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		dxGrid.addRow(gridID);
	});

	$("button[data-type='deleteCheckedRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		dxGrid.deleteCheckedRow(gridID);
	});

	$("button[data-type='checkedRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		let checkedData = dxGrid.getCheckedData(gridID);
		console.log("<<<checkedData>>>", checkedData);
	});

	$("button[data-type='allRows']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		let data = dxGrid.getGridData(gridID);
		console.log("<<<data>>>", data);
	});

	$("button[data-type='getRowData']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		let rowData = dxGrid.getRowData(gridID, 2);
		console.log("<<<rowData>>>", rowData);
	});

	$("button[data-type='setRowData']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		dxGrid.setRowData(gridID, 2, {
			"ID": 1,
			"FirstName": "쭈",
			"LastName": "영",
			"Prefix": "이",
			"Position": "ㅁ",
			"StateID": 4,
			"CityID": 14,
			"ThridID": 18
		});
	});

	$("button[data-type='getCellValue']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		let cellData = dxGrid.getCellValue(gridID, 2, "Position");
		console.log("<<<cellData>>>", cellData);
	});

	$("button[data-type='setCellValue']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		dxGrid.setCellValue(gridID, 2, "Position", "Apple");
	});

	$("button[data-type='deleteRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		dxGrid.deleteRow(gridID, 2);
	});

	$("button[data-type='setFocus']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridID = $el.attr("data-grid-id");
		dxGrid.setFocus(gridID, 3, "Position");
	});
});

</script>

</head>
<body class="dx-viewport">
<h2>Method Test</h2>
<div class="form-content">
	<div>
		<button type="button" data-type="addRow" data-grid-id="helpPopUpGridContainer">신규</button>
		<button type="button" data-type="deleteCheckedRow" data-grid-id="helpPopUpGridContainer">선택행삭제</button>
		<button type="button" data-type="checkedRow" data-grid-id="helpPopUpGridContainer">선택행조회(cosole)</button>
		<button type="button" data-type="allRows" data-grid-id="helpPopUpGridContainer">모든데이터조회(console)</button>
		<button type="button" data-type="getRowData" data-grid-id="helpPopUpGridContainer">[2] 행조회(cosole)</button>
		<button type="button" data-type="setRowData" data-grid-id="helpPopUpGridContainer">[2] 행 데이터 설정</button>
		<button type="button" data-type="getCellValue" data-grid-id="helpPopUpGridContainer">[2,Position] 셀조회(cosole)</button>
		<button type="button" data-type="setCellValue" data-grid-id="helpPopUpGridContainer">[2,Position] 셀 데이터 설정</button>
		<button type="button" data-type="deleteRow" data-grid-id="helpPopUpGridContainer">[2] 행삭제</button>
		<button type="button" data-type="setFocus" data-grid-id="helpPopUpGridContainer">[2,Position] 포커스설정</button>
	</div>
	<div class="grid-container" id="helpPopUpGridContainer"></div>
</div>

<script>
Listener.grid.onInitialized = function (gridID) {
	if (gridID == "helpPopUpGridContainer") {
		// console.log("dddddd");
	}
}

$(document).ready(function () {
	let columns, gridID = "helpPopUpGridContainer";
	let states = [{
		"CODE": 1,
		"NAME": "Alabama"
	}, {
		"CODE": 2,
		"NAME": "Alaska"
	}, {
		"CODE": 3,
		"NAME": "Arizona"
	}, {
		"CODE": 4,
		"NAME": "Arkansas"
	}, {
		"CODE": 5,
		"NAME": "California"
	}];

	columns = [

		new Column("성","LastName","auto","text", {
			cellStyle : "redText",
		}),
		new Column("이름","FirstName","auto","text", {
			cellStyle : "color : blue",
		}),
		new Column("직급","Position","auto","text", {
			cellStyle : function (rowData) {
				if (rowData["Position"] === "CTO") {
					return "redText"
				}
			}
		}),
		new Column("State 코드","StateID","auto","codeHelp", {
			dataSource: states,
			codeNameField: "StateIDName"
		}),
		new Column("State 명","StateIDName","auto","text", {
			readonly : true,
			cellStyle : "color : blue",
		}),

	]

	dxGrid.initGrid(gridID, "100%", "", {checkbox: true, editable: true, sortable: true } );
	dxGrid.setColumn(gridID, columns);
	dxGrid.setGridDataByUrl(gridID,"selectGridData.json");
});


</script>

</body>
</html>