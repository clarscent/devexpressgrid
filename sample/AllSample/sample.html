<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>All Sample</title>

<script src="js/jquery-3.4.0.min.js"></script>
<script src="js/lodash-4.17.15.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/dx.common.css"/>
<link rel="stylesheet" type="text/css" href="css/dx.light.css"/>
<link rel="stylesheet" type="text/css" href="css/grid_back.css"/>
<link rel="stylesheet" type="text/css" href="css/grid-custom-2.css"/>
<script src="js/dx.custom.js"></script>
<!--<script src="js/dx.all.debug.js"></script>-->
<script src="sample.js"></script>
<script src="readGridData.js"></script>

<style>
.dx-dropdowneditor-icon {
	background-image: url("css/icons/ico-down.png");
}
.dx-dropdowneditor-icon:before {
	content: unset;
}

.dx-datagrid-rowsview .dx-row-focused.dx-data-row:not(.dx-edit-row) .dx-command-edit .dx-icon-help {
	font-size: 18px;
	font-family: DXIcons;
}

.dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit,
.dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit.dx-command-edit-with-icons {
	width: unset;
	min-width: unset;
}

.form-content {
	margin-bottom: 30px;
}
</style>

<script type="text/javascript">
$(document).ready(function () {
	$("button[data-type='addRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridId = $el.attr("data-grid-id");
		Grid.method.addRow(gridId);
	});

	$("button[data-type='deleteRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridId = $el.attr("data-grid-id");
		Grid.method.deleteRow(gridId);
	});

	$("button[data-type='checkedRow']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridId = $el.attr("data-grid-id");
		let checkedData = Grid.method.getCheckedData(gridId);
		console.log("<<<checkedData>>>", checkedData);
	});

	$("button[data-type='saveData']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridId = $el.attr("data-grid-id");
		Grid.method.saveEditData(gridId);
	});

	$("button[data-type='allRows']").on("click", function(evt) {
		$el = $(evt.currentTarget);
		let gridId = $el.attr("data-grid-id");
		let data = Grid.method.getGridData(gridId);
		console.log("<<<data>>>", data);
	});

});
</script>

</head>
<body class="dx-viewport">

<div class="form-content">
	<div>
		<button type="button" data-type="addRow" data-grid-id="readOrEditGridContainer">신규</button>
		<button type="button" data-type="deleteRow" data-grid-id="readOrEditGridContainer">삭제</button>
		<button type="button" data-type="checkedRow" data-grid-id="readOrEditGridContainer">조회</button>
		<button type="button" data-type="saveData" data-grid-id="readOrEditGridContainer">저장</button>
	</div>
	<div class="grid-container" id="readOrEditGridContainer"></div>
</div>

<div class="form-content">
	<div>
		<button type="button" data-type="addRow" data-grid-id="selectBoxGridContainer">신규</button>
		<button type="button" data-type="deleteRow" data-grid-id="selectBoxGridContainer">삭제</button>
		<button type="button" data-type="checkedRow" data-grid-id="selectBoxGridContainer">조회</button>
		<button type="button" data-type="allRows" data-grid-id="selectBoxGridContainer">모든데이터조회</button>
		<button type="button" data-type="test" data-grid-id="selectBoxGridContainer">test</button>
	</div>
	<div class="grid-container" id="selectBoxGridContainer"></div>
</div>

<div class="form-content">
	<div>
		<button type="button" data-type="addRow" data-grid-id="helpPopUpGridContainer">신규</button>
		<button type="button" data-type="deleteRow" data-grid-id="helpPopUpGridContainer">삭제</button>
		<button type="button" data-type="checkedRow" data-grid-id="helpPopUpGridContainer">조회</button>
	</div>
	<div class="grid-container" id="helpPopUpGridContainer"></div>
</div>

<script>
Listener.grid.onInitialized = function (gridId) {
	if (gridId == "selectBoxGridContainer") {
		console.log("dddddd");
	}
}
$(document).ready(function () {
	let band, columns, footer, gridId = "readOrEditGridContainer";

	band = [
		new Band("Country"),
		new Band("Area"),
		new Band("국가총생산", [
			new Band("Population_Total"),
			new Band("Population_Urban"),
		]),
		new Band("일반\nGDP", [
			new Band("GDP_Total"),
			new Band("분야", [
				new Band("GDP_Agriculture"),
				new Band("GDP_Industry"),
				new Band("GDP_Services"),
			]),
		]),
	]
	
	columns = [
		new ColConfig("나라","Country","200px","text"),
		new ColConfig("지역","Area","300px","number"),
		new ColConfig("인구 합","Population_Total","150px","number"),
		new ColConfig("인구(외곽)","Population_Urban","150px","percent"),
		new ColConfig("GDP 총합","GDP_Total","150px","number"),
		new ColConfig("농업","GDP_Agriculture","150px",{type: "percent", pre: 3}),
		new ColConfig("산업","GDP_Industry","150px",{type: "percent", pre: 1}),
		new ColConfig("서비스업","GDP_Services","150px",{type: "percent", pre: 1}),
	]

	footer = [
		new Footer("Country", "text", "텍스트"),
		new Footer("Population_Total", "sum"),
		new Footer("Population_Urban", "avg", "평균: ", ""),
		new Footer("GDP_Agriculture", "min", "", {type:"percent", pre: 2}, "center"),
		new Footer("GDP_Industry", "max"),
	]

	Grid.config.setGrid(gridId, "100%", "", { checkbox: true, editable: false, sortable: true } );
	Column.config.setColumn(gridId, columns);
	Grid.method.setGridData(gridId, readGridData);

	// Grid.config.setEditMode(gridId, true);

	// 헤더 설정
	// Header.config.setHeader(gridId, columns, band);

	// 헤더 CSS 설정
	// let headerCss = [
	// 	new Attribute("background-color", "#f5f5f5"),
	// 	new Attribute("text-align", "right"),
	// ]
	// Header.config.setCss(gridId, headerCss);

	// Footer 설정
	Grid.config.setFooter(gridId, footer);

});

$(document).ready(function () {
	let columns, gridId = "selectBoxGridContainer";
	let states = [{
		"CODE": 1,
		"NAME": "Alabama"
	}, {
		"CODE": 2,
		"NAME": "Alaska"
	}, {
		"CODE": 3,
		"NAME": "Arizona"
	}, {
		"CODE": 4,
		"NAME": "Arkansas"
	}, {
		"CODE": 5,
		"NAME": "California"
	}];
	let cities = [{
		"CODE": 1,
		"NAME": "Tuscaloosa",
		"parentCode": 1
	}, {
		"CODE": 2,
		"NAME": "Hoover",
		"parentCode": 1
	}, {
		"CODE": 3,
		"NAME": "Dothan",
		"parentCode": 1
	}, {
		"CODE": 4,
		"NAME": "Decatur",
		"parentCode": 1
	}, {
		"CODE": 5,
		"NAME": "Anchorage",
		"parentCode": 2
	}, {
		"CODE": 6,
		"NAME": "Fairbanks",
		"parentCode": 2
	}, {
		"CODE": 7,
		"NAME": "Juneau",
		"parentCode": 2
	}, {
		"CODE": 8,
		"NAME": "Avondale",
		"parentCode": 3
	}, {
		"CODE": 9,
		"NAME": "Buckeye",
		"parentCode": 3
	}, {
		"CODE": 10,
		"NAME": "Carefree",
		"parentCode": 3
	}, {
		"CODE": 11,
		"NAME": "Springdale",
		"parentCode": 4
	}, {
		"CODE": 12,
		"NAME": "Rogers",
		"parentCode": 4
	}, {
		"CODE": 13,
		"NAME": "Sherwood",
		"parentCode": 4
	}, {
		"CODE": 14,
		"NAME": "Jacksonville",
		"parentCode": 4
	}, {
		"CODE": 15,
		"NAME": "Cabot",
		"parentCode": 4
	}, {
		"CODE": 16,
		"NAME": "Adelanto",
		"parentCode": 5
	}, {
		"CODE": 17,
		"NAME": "Glendale",
		"parentCode": 5
	}, {
		"CODE": 18,
		"NAME": "Moorpark",
		"parentCode": 5
	}, {
		"CODE": 19,
		"NAME": "Needles",
		"parentCode": 5
	}, {
		"CODE": 20,
		"NAME": "Ontario",
		"parentCode": 5
	}];
	let thirdCode = [
		{ "CODE" : 1, "NAME": "1번", "parentCode": "1"},
		{ "CODE" : 2, "NAME": "2번", "parentCode": "1"},
		{ "CODE" : 3, "NAME": "3번", "parentCode": "2"},
		{ "CODE" : 4, "NAME": "4번", "parentCode": "2"},
		{ "CODE" : 5, "NAME": "5번", "parentCode": "3"},
		{ "CODE" : 6, "NAME": "6번", "parentCode": "4"},
		{ "CODE" : 8, "NAME": "8번", "parentCode": "4"},
		{ "CODE" : 9, "NAME": "9번", "parentCode": "5"},
		{ "CODE" : 10, "NAME": "10번", "parentCode": 6},
		{ "CODE" : 11, "NAME": "11번", "parentCode": "7"},
		{ "CODE" : 12, "NAME": "12번", "parentCode": "8"},
		{ "CODE" : 13, "NAME": "13번", "parentCode": "9"},
		{ "CODE" : 14, "NAME": "14번", "parentCode": "10"},
		{ "CODE" : 15, "NAME": "15번", "parentCode": "11"},
		{ "CODE" : 16, "NAME": "16번", "parentCode": "12"},
		{ "CODE" : 17, "NAME": "17번", "parentCode": "13"},
		{ "CODE" : 18, "NAME": "18번", "parentCode": "14"},
		{ "CODE" : 19, "NAME": "19번", "parentCode": "15"},
		{ "CODE" : 20, "NAME": "20번", "parentCode": "16"},
		{ "CODE" : 21, "NAME": "21번", "parentCode": "17"},
		{ "CODE" : 22, "NAME": "22번", "parentCode": "18"},
		{ "CODE" : 23, "NAME": "23번", "parentCode": "19"},
		{ "CODE" : 24, "NAME": "24번", "parentCode": "20"},
	];

	columns = [
		new ColConfig("성","LastName","auto","text"),
		new ColConfig("이름","FirstName","auto","text"),
		new ColConfig("직급","Position","auto","text"),
		new ColConfig("주","StateID","auto","text", new Column.SelectBox(states)),
		new ColConfig("도시","CityID","auto","text", new Column.SelectBox(cities, "StateID")),
		new ColConfig("3번","ThridID","auto","text", new Column.SelectBox(thirdCode, "CityID")),
	]

	Grid.config.setGrid(gridId, "100%", "", { checkbox: true, editable: true, sortable: false } );
	// Grid.config.setEditMode(gridId, true);
	Column.config.setColumn(gridId, columns);
	Grid.method.setGridDataByUrl(gridId,"selectGridData.json");

});

$(document).ready(function () {
	let columns, gridId = "helpPopUpGridContainer";
	let states = [{
		"CODE": 1,
		"NAME": "Alabama"
	}, {
		"CODE": 2,
		"NAME": "Alaska"
	}, {
		"CODE": 3,
		"NAME": "Arizona"
	}, {
		"CODE": 4,
		"NAME": "Arkansas"
	}, {
		"CODE": 5,
		"NAME": "California"
	}];

	columns = [
		new ColConfig("State 코드","StateID","auto","text", new Column.HelpPopUp(states, "StateIDName")),
		new ColConfig("State 명","StateIDName","auto","text", "" ,true),
		new ColConfig("성","LastName","auto","text"),
		new ColConfig("이름","FirstName","auto","text"),
		new ColConfig("직급","Position","auto","text"),
	]

	Grid.config.setGrid(gridId, "100%", "", { checkbox: true, editable: true, sortable: true } );
	// Grid.config.setEditMode(gridId, true);
	Column.config.setColumn(gridId, columns);
	Grid.method.setGridDataByUrl(gridId,"selectGridData.json");

});


</script>

</body>
</html>