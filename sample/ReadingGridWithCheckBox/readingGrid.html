<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reading Grid With CheckBox</title>
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/lodash-4.17.15.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/dx.common.css"/>
    <link rel="dx-theme" data-theme="generic.light" href="css/dx.light.css"/>
    <link rel="stylesheet" type="text/css" href="css/grid.css"/>
    <script src="js/dx.all.js"></script>
    <script src="readingGrid.js"></script>
    <script src="readingGridData.js"></script>
</head>
<body>

<body class="dx-viewport">

<div class="demo-container">
    <div id="headerTest">
        <div id="headerTestContainer" style="height: 500px"></div>
    </div>
</div>
<p>결과 값은 콘솔창</p>
<button onclick="onGetGridData(gridId)">모든 데이터 가져오기</button>
<button onclick="onGetCheckedData(gridId)">선택한 데이터 가져오기</button>
<button onclick="onAddRow(gridId, {})">빈 행 추가</button>
<button onclick="onAddRow(gridId, obj)">파라미터있는 새로운 행 추가</button>
<button onclick="onDeleteRow(gridId)">선택한 행 일괄삭제</button>
<button onclick="onSaveEditData(gridId)">편집저장</button>
<p>TEST METHOD</p>

<br><br><br><br><h3>이벤트 테스트</h3>
<div class="demo-container">
    <div id="headerTest2">
        <div id="headerTestContainer2" style="height: 500px"></div>
    </div>
</div>

<script>
    var gridId = "#headerTestContainer";
    var gridId2 = "#headerTestContainer2";

    var obj = {
        "ID": 11,
        "Country": "United",
        "Area": 244820,
        "Population_Urban": 0.82,
        "Population_Rural": 0.18,
        "Population_Total": 65097000,
        "GDP_Agriculture": 0.007,
        "GDP_Industry": 0.21,
        "GDP_Services": 0.783,
        "GDP_Total": 2945146,
        "Picture": "css/images/cat01.jpg"
    };

    $(function () {

        let band = new Array();
        let columns  = new Array();
        let headerCss = new Array();

        band = [
            new Band("Country"),
            new Band("Area"),
            new Band("국가총생산", [
                new Band("Population_Total"),
                new Band("Population_Urban"),
            ]),
            new Band("일반\nGDP", [
                new Band("GDP_Total"),
                new Band("분야", [
                    new Band("GDP_Agriculture"),
                    new Band("GDP_Industry"),
                    new Band("GDP_Services"),
                ]),
            ]),
        ]

        columns = [
            new ColConfig("나라","Country","200px","text"),
            new ColConfig("지역","Area","100px","number"),
            new ColConfig("인구 합","Population_Total","150px","number"),
            new ColConfig("인구(외곽)","Population_Urban","150px","percent"),
            new ColConfig("GDP 총합","GDP_Total","150px","number",1),
            new ColConfig("농\n업","GDP_Agriculture","150px","percent",1),
            new ColConfig("산업","GDP_Industry","150px","percent",1),
            new ColConfig("서비스업","GDP_Services","150px","percent",1),
        ];

        Grid.config.setGrid(gridId, "", 500, true);
        Column.config.set(gridId, columns);
        Header.config.set(gridId, columns, band);
        Grid.config.setGridData(gridId, countries);

        // Header CSS
        headerCss = [
            new Attribute("background-color", "#f5f5f5"),
            new Attribute("vertical-align", "middle"),
            new Attribute("text-align", "center"),
        ]
        Header.config.setCss(gridId, headerCss);

        // Grid.config.setEditMode(gridId, true);
        // Grid.config.setSorting(gridId, "none");

        /// ??
        let listener = new Listener(gridId);
        listener.grid.onRowClick = function () {
            alert("Custom Event");
        }
        listener.addEventListener("onRowClick", listener.grid.onRowClick);

    });

    function onGetGridData(gridId) {
        console.log("모든 그리드 데이터", Grid.method.getGridData(gridId));
    }
    function onGetCheckedData(gridId) {
        console.log("선택한 데이터들", Grid.method.getCheckedData(gridId));
    }
    function onAddRow(gridId, obj) {
        Grid.method.addRow(gridId, obj, "top");
    }
    function onDeleteRow(gridId) {
        Grid.method.deleteRow(gridId);
    }
    function onSaveEditData(gridId) {
        Grid.method.saveEditData(gridId);
    }


</script>

</body>
</html>